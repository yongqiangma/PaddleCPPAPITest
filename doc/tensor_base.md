##### TensorBase.h å¤´æ–‡ä»¶ API å…¼å®¹æƒ…å†µ


##### TensorBase.h å¤´æ–‡ä»¶ API å…¼å®¹æ€§

âœ… è¡¨ç¤ºå·²ç»æ”¯æŒ
ğŸš§ è¡¨ç¤ºæ­£åœ¨æ”¯æŒ
âŒ è¡¨ç¤ºä¸å‡†å¤‡æ”¯æŒ
ğŸ”§ è¡¨ç¤ºéƒ¨åˆ†æ”¯æŒï¼ˆæœ‰åŠŸèƒ½é™åˆ¶ï¼‰

**æŒ‰ç…§åŠŸèƒ½åˆ†ç±»æ’åº**

---

### æ„é€ ä¸èµ‹å€¼

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `TensorBase()`               | âœ…               | âœ…          |   P0  | é»˜è®¤æ„é€ å‡½æ•° |
| `TensorBase(const TensorBase&)` | âœ…            | âœ…          |   P0  | æ‹·è´æ„é€ å‡½æ•° |
| `TensorBase(TensorBase&&)`   | âœ…               | âœ…          |   P0  | ç§»åŠ¨æ„é€ å‡½æ•° |
| `operator=(const TensorBase&)` | âœ…             | âœ…          |   P0  | æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ |
| `operator=(TensorBase&&)`    | âœ…               | âœ…          |   P0  | ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ |

---

### æ•°æ®è®¿é—® API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `data_ptr()`                 | âœ…               | âœ…          |   P0  | è¿”å› `void*` |
| `data_ptr<T>()`              | âœ…               | âœ…          |   P0  | è¿”å›ç±»å‹åŒ–æŒ‡é’ˆ |
| `const_data_ptr()`           | âœ…               | âœ…          |   P0  | è¿”å› `const void*` |
| `const_data_ptr<T>()`        | âœ…               | âœ…          |   P0  | è¿”å›ç±»å‹åŒ– const æŒ‡é’ˆ |
| `mutable_data_ptr()`         | âœ…               | âœ…          |   P0  | è¿”å›å¯å˜ `void*` |
| `mutable_data_ptr<T>()`      | âœ…               | âœ…          |   P0  | è¿”å›å¯å˜ç±»å‹åŒ–æŒ‡é’ˆ |
| `accessor<T, N>()`           | âœ…               | âœ…          |   P1  | TensorAccessor |
| `generic_packed_accessor<T, N>()` | - [ ]       | - [ ]       |   P2  | CUDA PackedTensorAccessor |
| `packed_accessor32<T, N>()`  | - [ ]            | - [ ]       |   P2  | 32ä½ç´¢å¼• PackedAccessor |
| `packed_accessor64<T, N>()`  | - [ ]            | - [ ]       |   P2  | 64ä½ç´¢å¼• PackedAccessor |

---

### ç»´åº¦ä¸å½¢çŠ¶ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `dim()`                      | âœ…               | âœ…          |   P0  | è¿”å›ç»´åº¦æ•° |
| `ndimension()`               | âœ…               | âœ…          |   P0  | åŒ `dim()` |
| `size(dim)`                  | âœ…               | âœ…          |   P0  | æ”¯æŒè´Ÿç´¢å¼• |
| `sizes()`                    | âœ…               | âœ…          |   P0  | è¿”å› IntArrayRef |
| `stride(dim)`                | âœ…               | âœ…          |   P0  | æ”¯æŒè´Ÿç´¢å¼• |
| `strides()`                  | âœ…               | âœ…          |   P0  | è¿”å› IntArrayRef |
| `numel()`                    | âœ…               | âœ…          |   P0  | å…ƒç´ æ€»æ•° |
| `storage_offset()`           | ğŸš§               | ğŸš§          |   P2  |  |
| `sym_size(dim)`              | ğŸš§               | ğŸš§          |   P3  | ç¬¦å·åŒ– size |
| `sym_stride(dim)`            | ğŸš§               | ğŸš§          |   P3  | ç¬¦å·åŒ– stride |
| `sym_sizes()`                | ğŸš§               | ğŸš§          |   P3  | ç¬¦å·åŒ– sizes |
| `sym_strides()`              | ğŸš§               | ğŸš§          |   P3  | ç¬¦å·åŒ– strides |
| `sym_numel()`                | ğŸš§               | ğŸš§          |   P3  | ç¬¦å·åŒ– numel |
| `sym_storage_offset()`       | ğŸš§               | ğŸš§          |   P3  | ç¬¦å·åŒ– storage_offset |

---

### å†…å­˜ä¸å­—èŠ‚ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `nbytes()`                   | âœ…               | âœ…          |   P0  | æ€»å­—èŠ‚æ•° |
| `itemsize()`                 | âœ…               | âœ…          |   P0  | å•å…ƒç´ å­—èŠ‚æ•° |
| `element_size()`             | âœ…               | âœ…          |   P0  | åŒ `itemsize()` |

---

### ç±»å‹ä¸è®¾å¤‡ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `dtype()`                    | âœ…               | âœ…          |   P0  | è¿”å› ScalarType |
| `scalar_type()`              | âœ…               | âœ…          |   P0  | åŒ `dtype()` |
| `device()`                   | âœ…               | âœ…          |   P0  | è¿”å› Device |
| `get_device()`               | âœ…               | âœ…          |   P0  | è¿”å›è®¾å¤‡ç´¢å¼• |
| `options()`                  | âœ…               | âœ…          |   P0  | è¿”å› TensorOptions |
| `layout()`                   | âœ…               | ğŸš§          |   P2  | è¿”å› Layout |
| `key_set()`                  | - [ ]            | - [ ]       |   P3  | DispatchKeySet |

---

### è®¾å¤‡ç±»å‹æ£€æŸ¥ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `is_cpu()`                   | âœ…               | âœ…          |   P0  | CPU åç«¯æ£€æŸ¥ |
| `is_cuda()`                  | âœ…               | âœ…          |   P0  | CUDA åç«¯æ£€æŸ¥ |
| `is_xpu()`                   | - [ ]            | - [ ]       |   P2  | XPU åç«¯æ£€æŸ¥ |
| `is_ipu()`                   | - [ ]            | - [ ]       |   P3  | IPU åç«¯æ£€æŸ¥ |
| `is_xla()`                   | - [ ]            | - [ ]       |   P3  | XLA åç«¯æ£€æŸ¥ |
| `is_mtia()`                  | - [ ]            | - [ ]       |   P3  | MTIA åç«¯æ£€æŸ¥ |
| `is_hpu()`                   | - [ ]            | - [ ]       |   P3  | HPU åç«¯æ£€æŸ¥ |
| `is_lazy()`                  | - [ ]            | - [ ]       |   P3  | Lazy åç«¯æ£€æŸ¥ |
| `is_hip()`                   | - [ ]            | - [ ]       |   P3  | HIP åç«¯æ£€æŸ¥ |
| `is_ve()`                    | - [ ]            | - [ ]       |   P3  | VE åç«¯æ£€æŸ¥ |
| `is_privateuseone()`         | - [ ]            | - [ ]       |   P3  | PrivateUse1 åç«¯æ£€æŸ¥ |
| `is_meta()`                  | - [ ]            | - [ ]       |   P3  | Meta tensor æ£€æŸ¥ |

---

### å¼ é‡å±æ€§æ£€æŸ¥ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `defined()`                  | âœ…               | âœ…          |   P0  | æ˜¯å¦å·²å®šä¹‰ |
| `is_contiguous()`            | âœ…               | âœ…          |   P0  | è¿ç»­æ€§æ£€æŸ¥ |
| `sym_is_contiguous()`        | - [ ]            | - [ ]       |   P3  | ç¬¦å·åŒ–è¿ç»­æ€§æ£€æŸ¥ |
| `is_contiguous_or_false()`   | ğŸš§               | ğŸš§          |   P3  |  |
| `is_non_overlapping_and_dense()` | - [ ]        | - [ ]       |   P3  |  |
| `is_complex()`               | ğŸš§               | ğŸš§          |   P2  | æ˜¯å¦å¤æ•°ç±»å‹ |
| `is_floating_point()`        | ğŸš§               | ğŸš§          |   P2  | æ˜¯å¦æµ®ç‚¹ç±»å‹ |
| `is_signed()`                | ğŸš§               | ğŸš§          |   P2  | æ˜¯å¦æœ‰ç¬¦å·ç±»å‹ |
| `is_sparse()`                | - [ ]            | - [ ]       |   P3  | æ˜¯å¦ç¨€ç–å¼ é‡ |
| `is_sparse_csr()`            | - [ ]            | - [ ]       |   P3  | æ˜¯å¦ CSR ç¨€ç–å¼ é‡ |
| `is_mkldnn()`                | - [ ]            | - [ ]       |   P3  | æ˜¯å¦ MKLDNN å¼ é‡ |
| `is_mps()`                   | - [ ]            | - [ ]       |   P3  | æ˜¯å¦ MPS å¼ é‡ |
| `is_vulkan()`                | - [ ]            | - [ ]       |   P3  | æ˜¯å¦ Vulkan å¼ é‡ |
| `is_metal()`                 | - [ ]            | - [ ]       |   P3  | æ˜¯å¦ Metal å¼ é‡ |
| `is_quantized()`             | - [ ]            | - [ ]       |   P3  | æ˜¯å¦é‡åŒ–å¼ é‡ |
| `is_inference()`             | - [ ]            | - [ ]       |   P3  | æ˜¯å¦æ¨ç†å¼ é‡ |
| `is_nested()`                | - [ ]            | - [ ]       |   P3  | æ˜¯å¦åµŒå¥—å¼ é‡ |

---

### å†…å­˜æ ¼å¼ä¸è¿ç»­æ€§ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `contiguous()`               | ğŸ”§               | âœ…          |   P0  | ä»…æ”¯æŒ Contiguous æ ¼å¼ |
| `expect_contiguous()`        | - [ ]            | - [ ]       |   P2  | MaybeOwned ç‰ˆæœ¬ |
| `suggest_memory_format()`    | - [ ]            | - [ ]       |   P2  |  |

---

### å°±åœ°ä¿®æ”¹æ“ä½œ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `fill_(scalar)`              | âœ…               | âœ…          |   P0  | å¡«å……æ ‡é‡å€¼ |
| `zero_()`                    | âœ…               | âœ…          |   P0  | ç½®é›¶ |
| `copy_(src, non_blocking)`   | âœ…               | âœ…          |   P0  | å¤åˆ¶æ•°æ® |

---

### å½¢çŠ¶å˜æ¢ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `reshape(shape)`             | âœ…               | âœ…          |   P0  |  |
| `view(size)`                 | âœ…               | âœ…          |   P0  | å½¢çŠ¶ view |
| `view(dtype)`                | âœ…               | âœ…          |   P1  | ç±»å‹ view |

---

### ç±»å‹è½¬æ¢ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `to(options, ...)`           | ğŸ”§               | âœ…          |   P1  | ä»…æ”¯æŒ dtype è½¬æ¢ï¼Œä¸æ”¯æŒ device/memory_format |

---

### å­˜å‚¨ç›¸å…³ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `has_storage()`              | ğŸš§               | ğŸš§          |   P2  |  |
| `storage()`                  | ğŸš§               | ğŸš§          |   P2  |  |
| `is_alias_of(other)`         | ğŸš§               | ğŸš§          |   P2  |  |
| `share_memory_()`            | - [ ]            | - [ ]       |   P3  |  |

---

### å†…éƒ¨çŠ¶æ€ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `is_same(other)`             | ğŸš§               | ğŸš§          |   P2  | æ˜¯å¦åŒä¸€å¼ é‡ |
| `use_count()`                | ğŸš§               | ğŸš§          |   P3  | å¼•ç”¨è®¡æ•° |
| `weak_use_count()`           | ğŸš§               | ğŸš§          |   P3  | å¼±å¼•ç”¨è®¡æ•° |
| `reset()`                    | âœ…               | ğŸš§          |   P2  | é‡ç½®å¼ é‡ |
| `_is_zerotensor()`           | - [ ]            | - [ ]       |   P3  |  |
| `_set_zero(zero)`            | - [ ]            | - [ ]       |   P3  |  |
| `is_conj()`                  | - [ ]            | - [ ]       |   P3  | å…±è½­æ ‡è®° |
| `_set_conj(conjugate)`       | - [ ]            | - [ ]       |   P3  |  |
| `is_neg()`                   | - [ ]            | - [ ]       |   P3  | è´Ÿå·æ ‡è®° |
| `_set_neg(negative)`         | - [ ]            | - [ ]       |   P3  |  |

---

### TensorImpl è®¿é—® API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `unsafeGetTensorImpl()`      | - [ ]            | - [ ]       |   P3  | å†…éƒ¨ä½¿ç”¨ |
| `unsafeReleaseTensorImpl()`  | - [ ]            | - [ ]       |   P3  | å†…éƒ¨ä½¿ç”¨ |
| `getIntrusivePtr()`          | - [ ]            | - [ ]       |   P3  | å†…éƒ¨ä½¿ç”¨ |
| `unsafeReleaseIntrusivePtr()` | - [ ]           | - [ ]       |   P3  | å†…éƒ¨ä½¿ç”¨ |

---

### å‘½åå¼ é‡ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `has_names()`                | - [ ]            | - [ ]       |   P3  |  |
| `opt_names()`                | - [ ]            | - [ ]       |   P3  |  |
| `names()`                    | - [ ]            | - [ ]       |   P3  |  |
| `get_named_tensor_meta()`    | - [ ]            | - [ ]       |   P3  |  |

---

### è‡ªåŠ¨æ±‚å¯¼ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `requires_grad()`            | - [ ]            | - [ ]       |   P1  |  |
| `set_requires_grad(bool)`    | - [ ]            | - [ ]       |   P1  |  |
| `requires_grad_(bool)`       | - [ ]            | - [ ]       |   P1  |  |
| `is_leaf()`                  | - [ ]            | - [ ]       |   P2  |  |
| `grad_fn()`                  | - [ ]            | - [ ]       |   P2  |  |
| `retain_grad()`              | - [ ]            | - [ ]       |   P2  |  |
| `retains_grad()`             | - [ ]            | - [ ]       |   P2  |  |
| `_fw_grad(level)`            | - [ ]            | - [ ]       |   P3  | Forward AD |
| `_set_fw_grad(...)`          | - [ ]            | - [ ]       |   P3  | Forward AD |
| `register_hook(hook)`        | - [ ]            | - [ ]       |   P2  |  |
| `remove_hook(pos)`           | - [ ]            | - [ ]       |   P2  |  |
| `output_nr()`                | - [ ]            | - [ ]       |   P3  |  |
| `set_data(new_data)`         | - [ ]            | - [ ]       |   P2  |  |
| `data()`                     | - [ ]            | - [ ]       |   P2  |  |
| `_version()`                 | - [ ]            | - [ ]       |   P3  |  |
| `tensor_data()`              | - [ ]            | - [ ]       |   P3  |  |
| `variable_data()`            | - [ ]            | - [ ]       |   P3  |  |

---

### è§†å›¾ç›¸å…³ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `is_view()`                  | - [ ]            | - [ ]       |   P2  |  |
| `_base()`                    | - [ ]            | - [ ]       |   P2  |  |

---

### æ‚é¡¹ API

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `toString()`                 | ğŸš§               | ğŸš§          |   P3  |  |
| `print()`                    | - [ ]            | - [ ]       |   P3  |  |
| `name()`                     | - [ ]            | - [ ]       |   P3  |  |
| `quantizer()`                | - [ ]            | - [ ]       |   P3  | é‡åŒ–å™¨ |

---

### Paddle å…¼å®¹å±‚ç‰¹æœ‰ API

| API                          | è¯´æ˜ |
|------------------------------|------|
| `_PD_GetInner()`             | è·å–å†…éƒ¨ PaddleTensor å¼•ç”¨ |

---

### å…¼å®¹æ€§ç»Ÿè®¡

| çŠ¶æ€ | æ•°é‡ |
|------|------|
| âœ… å·²å®Œå…¨æ”¯æŒ | 35 |
| ğŸš§ æ­£åœ¨æ”¯æŒ | 7 |
| ğŸ”§ éƒ¨åˆ†æ”¯æŒ | 2 |
| - [ ] æœªå®ç° | 63+ |

---

### å¤‡æ³¨

1. **ä¼˜å…ˆçº§è¯´æ˜**ï¼š
   - P0: æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»æ”¯æŒ
   - P1: å¸¸ç”¨åŠŸèƒ½ï¼Œé«˜ä¼˜å…ˆçº§
   - P2: è¿›é˜¶åŠŸèƒ½ï¼Œä¸­ä¼˜å…ˆçº§
   - P3: è¾¹ç¼˜åŠŸèƒ½ï¼Œä½ä¼˜å…ˆçº§

2. **éƒ¨åˆ†æ”¯æŒè¯´æ˜**ï¼š
   - `contiguous()`: ç›®å‰ä»…æ”¯æŒ `MemoryFormat::Contiguous`ï¼Œä¸æ”¯æŒ ChannelsLast ç­‰æ ¼å¼
   - `to()`: ç›®å‰ä»…æ”¯æŒ dtype è½¬æ¢ï¼Œä¸æ”¯æŒ device å’Œ memory_format é€‰é¡¹

3. **ç¬¦å·åŒ– API** (`sym_*`): ç”¨äºåŠ¨æ€å½¢çŠ¶åœºæ™¯ï¼Œç›®å‰å‡æœªæ”¯æŒ

4. **è‡ªåŠ¨æ±‚å¯¼ API**: éœ€è¦ä¸ Paddle çš„è‡ªåŠ¨æ±‚å¯¼æœºåˆ¶å¯¹æ¥ï¼Œå¾…åç»­å®ç°
