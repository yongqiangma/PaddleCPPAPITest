##### Layout.h å¤´æ–‡ä»¶ API å…¼å®¹æƒ…å†µ


##### Layout.h å¤´æ–‡ä»¶ API å…¼å®¹æ€§

âœ… è¡¨ç¤ºå·²ç»æ”¯æŒ
ğŸš§ è¡¨ç¤ºæ­£åœ¨æ”¯æŒ
âŒ è¡¨ç¤ºä¸å‡†å¤‡æ”¯æŒ
ğŸ”§ è¡¨ç¤ºéƒ¨åˆ†æ”¯æŒï¼ˆæœ‰åŠŸèƒ½é™åˆ¶ï¼‰

**æŒ‰ç…§åŠŸèƒ½åˆ†ç±»æ’åº**

---

### Layout æšä¸¾ç±»å‹

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `Layout::Strided`            | âœ…               | âœ…          |   P0  | æ ‡å‡†å¯†é›†å¸ƒå±€ |
| `Layout::Sparse`             | âœ…               | âœ…          |   P2  | COO ç¨€ç–å¸ƒå±€ |
| `Layout::SparseCsr`          | âœ…               | âœ…          |   P2  | CSR ç¨€ç–å¸ƒå±€ |
| `Layout::Mkldnn`             | âœ…               | âœ…          |   P3  | MKLDNN å¸ƒå±€ |
| `Layout::SparseCsc`          | âœ…               | âœ…          |   P3  | CSC ç¨€ç–å¸ƒå±€ |
| `Layout::SparseBsr`          | âœ…               | âœ…          |   P3  | BSR ç¨€ç–å¸ƒå±€ |
| `Layout::SparseBsc`          | âœ…               | âœ…          |   P3  | BSC ç¨€ç–å¸ƒå±€ |
| `Layout::Jagged`             | âœ…               | âœ…          |   P3  | ä¸è§„åˆ™å¸ƒå±€ |
| `Layout::NumOptions`         | âœ…               | âœ…          |   P3  | å¸ƒå±€é€‰é¡¹æ•°é‡ |

---

### å¸ƒå±€å¸¸é‡

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `kStrided`                   | âœ…               | âœ…          |   P0  | = Layout::Strided |
| `kSparse`                    | âœ…               | âœ…          |   P2  | = Layout::Sparse |
| `kSparseCsr`                 | âœ…               | âœ…          |   P2  | = Layout::SparseCsr |
| `kMkldnn`                    | âœ…               | âœ…          |   P3  | = Layout::Mkldnn |
| `kSparseCsc`                 | âœ…               | âœ…          |   P3  | = Layout::SparseCsc |
| `kSparseBsr`                 | âœ…               | âœ…          |   P3  | = Layout::SparseBsr |
| `kSparseBsc`                 | âœ…               | âœ…          |   P3  | = Layout::SparseBsc |
| `kJagged`                    | âœ…               | âœ…          |   P3  | = Layout::Jagged |

---

### è¾…åŠ©å‡½æ•°

| torch API                    | paddle API å…¼å®¹æ€§ | æµ‹è¯•ç”¨ä¾‹çŠ¶æ€ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|------------------------------|------------------|------------|-------|------|
| `operator<<(ostream, Layout)` | âœ…              | âœ…          |   P1  | è¾“å‡ºæµè¿ç®—ç¬¦ |
| `layout_from_backend()`      | - [ ]            | - [ ]       |   P3  | ä»åç«¯æ¨æ–­å¸ƒå±€ |

---

### å‘½åç©ºé—´å¯¼å‡º

| å‘½åç©ºé—´ | å¯¼å‡ºå†…å®¹ | çŠ¶æ€ |
|---------|---------|------|
| `c10`   | Layout æšä¸¾ã€æ‰€æœ‰å¸¸é‡ | âœ… |
| `at`    | Layout æšä¸¾ã€æ‰€æœ‰å¸¸é‡ | âœ… |
| `torch` | Layout æšä¸¾ã€æ‰€æœ‰å¸¸é‡ | âœ… |

---

### å…¼å®¹æ€§ç»Ÿè®¡

| çŠ¶æ€ | æ•°é‡ |
|------|------|
| âœ… å·²å®Œå…¨æ”¯æŒ | 18 |
| ğŸš§ æ­£åœ¨æ”¯æŒ | 0 |
| ğŸ”§ éƒ¨åˆ†æ”¯æŒ | 0 |
| - [ ] æœªå®ç° | 1 |

---

### å¤‡æ³¨

1. **ä¼˜å…ˆçº§è¯´æ˜**ï¼š
   - P0: æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»æ”¯æŒ
   - P1: å¸¸ç”¨åŠŸèƒ½ï¼Œé«˜ä¼˜å…ˆçº§
   - P2: è¿›é˜¶åŠŸèƒ½ï¼Œä¸­ä¼˜å…ˆçº§
   - P3: è¾¹ç¼˜åŠŸèƒ½ï¼Œä½ä¼˜å…ˆçº§

2. **å®ç°è¯´æ˜**ï¼š
   - Layout æšä¸¾ä¸ LibTorch å®Œå…¨ä¸€è‡´
   - è¾“å‡ºæµè¿ç®—ç¬¦æ”¯æŒæ‰€æœ‰å¸ƒå±€ç±»å‹çš„å­—ç¬¦ä¸²è¡¨ç¤º
   - `layout_from_backend()` æœªå®ç°ï¼Œå› ä¸º Paddle ä½¿ç”¨ä¸åŒçš„åç«¯æŠ½è±¡

3. **ä½¿ç”¨å»ºè®®**ï¼š
   - å¤§å¤šæ•°åœºæ™¯ä½¿ç”¨ `kStrided`ï¼ˆé»˜è®¤å¯†é›†å¸ƒå±€ï¼‰
   - ç¨€ç–å¼ é‡ç›¸å…³å¸ƒå±€éœ€è¦é…åˆç¨€ç–å¼ é‡ API ä½¿ç”¨
